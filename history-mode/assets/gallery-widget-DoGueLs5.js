import{d as W,r as d,l as j,m as A,o as I,p as V,q,a as t,e as s,f as r,F as x,s as D,c as k,g as p,v as F,t as H,j as m,x as O,y as U,z as X,A as G,B as w,C as J,n as Q,T as Y,D as Z,E as P,k as ee}from"./main-CJ732b9F.js";const te={key:0,class:"w-full text-center mt-2"},le=["id"],ne={class:"flex flex-row min-h-0 justify-center items-center select-none gap-2"},se={key:0,class:"flex justify-evenly items-center p-5 gap-2",style:{margin:"0 auto"}},oe=["src","onClick","onKeypress"],ae=W({__name:"gallery-widget",props:{caption:String,maxPerRow:{type:Number,default:4},maxWidth:{type:String,default:"100%"}},setup(N){const v=N,b=Math.round(Math.random()*1e6),g=d(!1),c=d(0),C=d(0),E=d(),_=d(),z=d(),S=j(),o=A(()=>S.default?S.default():[]),y=(e,n=!0,l=!0)=>{g.value=!0,c.value=e,document.documentElement.style.overflow="hidden",n&&(z.value=document.activeElement),document.addEventListener("keydown",M),P(()=>{l&&E.value?.focus()})},B=()=>{c.value=(c.value+1)%o.value.length},K=()=>{c.value=(c.value-1+o.value.length)%o.value.length};function M(e){return R(e,`storylines-pop-up-modal-${b}`)}const f=()=>{g.value=!1,document.documentElement.style.overflow="auto",document.removeEventListener("keydown",M),P(()=>{z.value?.focus()})},h=()=>{const e=_.value.clientWidth-16,n=o.value.length;let l,i;e<=150?l=1:e<=300?l=2:e<=600?l=3:l=4,i=Math.min(n,Math.min(l,v.maxPerRow)),C.value=(e-8*i)/i},R=(e,n)=>{const l=e.key==="Tab"||e.keyCode===9,i=e.key==="Escape"||e.keyCode===27;if(!l){i&&f();return}const a='button, [href], input, select, textarea, iframe, [tabindex]:not([tabindex="-1"])',u=document.getElementById(n),L=u.querySelectorAll(a)[0],T=u.querySelectorAll(a),$=T[T.length-1];e.shiftKey?document.activeElement===L&&($.focus(),e.preventDefault()):(document.activeElement===$||!u.contains(document.activeElement))&&(L.focus(),e.preventDefault())};return I(()=>{window.addEventListener("resize",h),h()}),V(()=>{window.removeEventListener("resize",h)}),(e,n)=>{const l=q("tippy");return t(),s(x,null,[r("div",{class:"storylines-gallery flex-row w-full flex flex-wrap items-center gap-2",ref_key:"gallery",ref:_,style:O({"max-width":v.maxWidth})},[(t(!0),s(x,null,D(o.value,(i,a)=>(t(),s("div",null,[(t(),k(F(i),{onKeypress:p(u=>y(a),["enter"]),onClick:u=>y(a,!0,!1),size:C.value},null,40,["onKeypress","onClick","size"]))]))),256)),v.caption?(t(),s("div",te,H(v.caption),1)):m("",!0)],4),(t(),k(Z,{to:"body"},[U(Y,{name:"fade"},{default:X(()=>[g.value?(t(),s("div",{key:0,role:"dialog",class:"storylines-pop-up flex flex-col fixed top-0 left-0 w-full h-full p-5",tabindex:"0",id:"storylines-pop-up-modal-"+G(b)},[w((t(),s("button",{class:"absolute top-5 right-5 bg-white p-2 w-10 h-10 cursor-pointer hover:bg-gray-200 font-bold z-10",onClick:f,onKeypress:p(f,["enter"]),tabindex:"0",ref_key:"modalCloseButton",ref:E},n[0]||(n[0]=[J(" X ")]),32)),[[l,{content:e.$t("gallery.close"),placement:"left",toggle:"mouseenter focus click"}]]),r("div",ne,[o.value.length>1?w((t(),s("div",{key:0,class:"nav-button",tabindex:"0",onClick:K,onKeypress:p(K,["enter"])},n[1]||(n[1]=[r("svg",{class:"icon icon-arrowLeft",viewBox:"0 0 24 24",width:"24px",height:"24px"},[r("path",{d:"M0 0h24v24H0z",fill:"none"}),r("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})],-1)]),32)),[[l,{content:e.$t("gallery.previous"),placement:"right",toggle:"mouseenter focus click"}]]):m("",!0),(t(),k(F(o.value[c.value]),{isActive:!0,style:{"align-self":"center",margin:"0 auto"},class:"min-h-0",onClick:f,onKeypress:p(f,["esc"])},null,32)),o.value.length>1?w((t(),s("div",{key:1,class:"nav-button",tabindex:"0",onClick:B,onKeypress:p(B,["enter"])},n[2]||(n[2]=[r("svg",{class:"icon icon-arrowRight",viewBox:"0 0 24 24",width:"24px",height:"24px"},[r("path",{d:"M0 0h24v24H0z",fill:"none"}),r("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1)]),32)),[[l,{content:e.$t("gallery.next"),placement:"left",toggle:"mouseenter focus click"}]]):m("",!0)]),o.value.length>1?(t(),s("div",se,[(t(!0),s(x,null,D(o.value,(i,a)=>(t(),s("div",{key:a,class:Q(["flex-1 thumbnail",{"active-thumbnail":c.value===a}])},[r("img",{src:i.props.src,class:"object-cover",style:{display:"block",height:"50px",width:"50px"},tabindex:"0",onClick:u=>y(a,!1,!1),onKeypress:p(u=>y(a,!1,!1),["enter"])},null,40,oe)],2))),128))])):m("",!0)],8,le)):m("",!0)]),_:1})]))],64)}}}),re=ee(ae,[["__scopeId","data-v-c9456cf3"]]);export{re as default};
