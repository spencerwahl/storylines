import{d as _,r as o,i as h,o as b,w as y,a as u,e as p,f as n,t as f,n as w,g as x,j as S,k}from"./main-DL9gKhWh.js";import{mx as C}from"./story-JFVOYdrR.js";const M={class:"audio-transcript flex flex-col justify-center items-center"},j={class:"text-center font-bold"},q=["src"],L=["aria-expanded"],$=["innerHTML"],B=_({__name:"audio-widget",props:{src:{type:String,required:!0},title:{type:String,required:!1,default:""},transcript:{type:String,required:!1}},setup(g){const e=g,a=o(!1),c=()=>{a.value=!a.value},s=o(e.src),m=new C({html:!0}),i=o(""),l=h("configFileStructure");b(()=>{if(d(e.transcript||""),l)if(e.src.startsWith("http"))s.value=e.src;else{const t=`${e.src.substring(e.src.indexOf("/")+1)}`,r=l?.zip.file(t);r&&r.async("blob").then(v=>{s.value=URL.createObjectURL(v)})}}),y(e,(t,r)=>{d(t.transcript||"")});const d=t=>{i.value=m.render(t).replace(/<table/g,'<div class="table-container"><table').replace(/<\/table>/g,"</table></div>"),s.value=e.src,document.querySelectorAll(".storyramp-app a:not([target])").forEach(r=>r.target="_blank")};return(t,r)=>(u(),p("figure",M,[n("div",j,f(e.title),1),n("audio",{class:"w-5/6",src:s.value,controls:""},null,8,q),n("figcaption",null,[n("div",{class:w(["cursor-pointer text-center select-none",a.value?"transcript-open":"transcript-closed"]),onClick:c,onKeydown:x(c,["enter"]),tabindex:"0",role:"button","aria-expanded":a.value},f(a.value?t.$t("audio.transcript.hide"):t.$t("audio.transcript.show")),43,L),a.value?(u(),p("div",{key:0,class:"transcript",innerHTML:i.value||t.$t("audio.transcript.none")},null,8,$)):S("",!0)])]))}}),T=k(B,[["__scopeId","data-v-5287d5fa"]]);export{T as default};
